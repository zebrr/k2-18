{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/schemas/LearningChunkGraph.schema.json",
  "title": "LearningChunkGraph",
  "type": "object",
  "properties": {
    "nodes": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "type", "text", "node_offset"],
        "properties": {
          "id": { 
            "type": "string", 
            "pattern": "^[A-Za-z0-9:_-]+$",
            "description": "Unique identifier. For Chunk use: chunk_1, chunk_2, etc. For Assessment: assessment_1, assessment_2, etc. For Concept: use concept_id from ConceptDictionary"
          },
          "type": { 
            "type": "string", 
            "enum": ["Chunk", "Concept", "Assessment"],
            "description": "Node type determining its role in the knowledge graph"
          },
          "text": { 
            "type": "string",
            "description": "Main content of the node"
          },
          "node_offset": { 
            "type": "integer", 
            "minimum": 0, 
            "description": "Offset in tokens from the beginning of the slice where the node content starts"
          },
          "definition": { 
            "type": "string",
            "description": "Definition or description of the node content"
          },
          "concepts": { 
            "type": "array", 
            "items": { "type": "string" }, 
            "description": "Reserved for future use. Do not populate in current version - use MENTIONS edges instead"
          },
          "difficulty": { 
            "type": "integer", 
            "minimum": 1, 
            "maximum": 5,
            "description": "Difficulty level: 1=basic, 5=advanced"
          },
          "tags": { 
            "type": "array", 
            "items": { "type": "string" },
            "description": "Optional tags for categorization"
          },
          "language": { 
            "type": "string", 
            "minLength": 2, 
            "maxLength": 2,
            "description": "ISO 639-1 language code"
          },
          "metadata": { 
            "type": "object", 
            "additionalProperties": true,
            "description": "Additional custom metadata"
          }
        }
      }
    },
    "edges": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["source", "target", "type"],
        "properties": {
          "source": { 
            "type": "string",
            "description": "ID of the source node"
          },
          "target": { 
            "type": "string",
            "description": "ID of the target node"
          },
          "type": {
            "type": "string",
            "enum": [
              "PREREQUISITE", "ELABORATES", "EXAMPLE_OF",
              "HINT_FORWARD", "REFER_BACK", "PARALLEL",
              "TESTS", "REVISION_OF", "MENTIONS"
            ],
            "description": "Type of semantic relationship"
          },
          "weight": { 
            "type": "number", 
            "minimum": 0, 
            "maximum": 1,
            "description": "Confidence or strength of the relationship (0-1)"
          },
          "conditions": { 
            "type": "string",
            "description": "Optional conditions or context for this edge"
          }
        }
      }
    }
  },
  "required": ["nodes", "edges"],
  "additionalProperties": true
}